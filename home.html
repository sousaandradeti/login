<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel de Sistemas</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 40px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 500px; text-align: center; }
        .grid-sistemas { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        
        .btn-app { 
            padding: 20px; border-radius: 8px; text-decoration: none; color: white; 
            font-weight: bold; background: #007bff; transition: 0.2s; text-transform: uppercase;
            display: flex; align-items: center; justify-content: center; font-size: 14px;
        }
        .btn-app:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); background: #0056b3; }
        
        .logout { margin-top: 30px; display: inline-block; color: #dc3545; cursor: pointer; text-decoration: none; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <h2 id="saudacao">Bem-vindo</h2>
    <p>Selecione o sistema que deseja acessar:</p>

    <div id="listaSistemas" class="grid-sistemas">
        </div>

    <a href="#" class="logout" onclick="sair()">Sair do Sistema</a>
</div>

<script>
    const userStr = localStorage.getItem("usuario");
    
    if (!userStr) {
        window.location.href = "login.html";
    } else {
        const user = JSON.parse(userStr);
        document.getElementById("saudacao").innerText = `Olá, ${user.nome}!`;

        const container = document.getElementById("listaSistemas");
        
        // Pega a string da planilha (ex: "acb,aei,qweapp.html,https://site.com")
        // E transforma em uma lista (Array)
        const sistemasPermitidos = user.sistema.split(',').map(s => s.trim());

        sistemasPermitidos.forEach(sistema => {
            if (sistema === "") return; // Pula se estiver vazio

            const btn = document.createElement("a");
            btn.className = "btn-app";
            
            // Define o destino
            // Se não começar com http, assume que é um arquivo local e adiciona .html se necessário
            if (sistema.startsWith("http")) {
                btn.href = sistema;
                btn.target = "_blank"; // Abre sites externos em nova aba
                btn.innerText = "Sitema Externo"; 
            } else {
                // Se você digitou apenas "qweapp" na planilha, ele completa para "qweapp.html"
                btn.href = sistema.includes(".html") ? sistema : sistema + ".html";
                btn.innerText = sistema.replace(".html", "").toUpperCase();
            }

            container.appendChild(btn);
        });
    }

    function sair() {
        localStorage.clear();
        window.location.href = "login.html";
    }
</script>
</body>
</html>
